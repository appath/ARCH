================================
1005 Ночь
С вкусом ванили
1005 Night
With vanilla flavor
================================

cfdisk
100mb BOOT
2G SWAP
/ ROOT

mkfs.ext2 -L BOOT /dev/sda1
mkfs.ext4 -L / /dev/sda3
mkswap -L swap /dev/sda2

mount /dev/sda3 /mnt/gentoo
mkdir /mnt/gentoo/boot
mount /dev/sda1 /mnt/gentoo/boot
swapon /dev/sda2

date
030612552018
MMDDhhmmGGGG
МесяцДеньЧасыМинутыГод
MonthDateHourMonutesYear

cd /mnt/gentoo
links https://www.gentoo.org
DOWN Stage3

tar xpf stage3-*.tar.* --xattrs
распаковка stage3
unpacking

mirrorselect -i -o >> /mnt/gentoo/etc/portage/make.conf
mkdir /mnt/gentoo/etc/portage/repos.conf
cp /mnt/gentoo/usr/share/portage/config/repos.conf /mnt/gentoo/etc/portage/repos.conf/gentoo.conf
cp -L /etc/resolv.conf /mnt/gentoo/etc/

mount --types proc /proc /mnt/gentoo/proc
mount --rbind /sys /mnt/gentoo/sys
mount --make-rslave /mnt/gentoo/sys
mount --rbind /dev /mnt/gentoo/dev
mount --make-rslave /mnt/gentoo/dev

mount проверка test

chroot . /bin/bash
или
or
chroot . /bin/sh

emerge --sync --quiet

cd etc/
ls
cd portage/
ls
man make.conf

nano -w make.conf
	CHOST="" i686 x86_64
	CFLAGS="-02 -pipe -march=native"
	CXXFLAGS="${CFLAGS}"

gcc -march=native -E -v - < /dev/null

nproc
процессор 2 .. 4 .. 6 .. 8

nano -w make.conf
	MAKEOPTS="-j -l" -j3 -l2 пример
	USE="-bindist"

(news items)
=================================
eselect news list 
обзор новостей.
review of news.
eselect news read
можно прочитать новости
you can read the news
=================================

ls /usr/share/zoneinfo
echo "Europe/Moscow" > /etc/timezone
emerge --config sys-libs/timezone-data

nano -w /etc/locale.gen
	ru_US.UTF-8 UTF-8
	en_US.UTF-8 UTF-8
	
locale-gen
список локалей
list of locales
eselect locale list
	[1] C
	[2] POSIX
 	[3] ru_RU.utf-8
	[4] en_US.utf-8
	
можно установить правильную локаль из списка
you can set the correct locale from the list
eselect locale set 4

перезагрузка среды:
reboot the environment:
env-update && source /etc/profile

=================================
ls
cd package.use/
ls
nano iputils
	net-misc/iputils -caps -filecaps

cd 
cd /usr/portage/scripts/
ls
./bootstrap.sh -h инфо

bootstrap.sh && emerge -e system
=================================

cd ..
emerge -av sys-kernel/gentoo-sources

cd /usr/src/
ls -la
cd linux
eselect kernel list
	[1]  linux-*-gentoo *

cd linux
make help

Ядро
Core
make defconfig
make nconfig
make -j3 -l2
make
make install
make modules_install
cd /boot
ls
	EFI	*	*
	vmlinuz-*-gentoo-r1

если EFI
mkdir EFI/BOOT
cp vmlinuz-*-gentoo-r1 EFI/BOOT/BOOTx64.EFI
cp vmlinuz-*-gentoo-r1 EFI/BOOT/BOOT.EFI

cd
passwd
	toor пример

emerge -av dhcpcd
emerge -av sys-boot/grub:2

nano -w /etc/fstab 
	/dev/sda1     /boot         ext2    defaults,noatime    0 2
	/dev/sda3     /             ext4    noatime             0 1
	/dev/sda2     none          swap    sw                  0 0
	/dev/cdrom    /mnt/cdrom    auto    noauto,user         0 0

grub-install /dev/sda
nano -w /etc/default/grub
	GRUB_CMDLINE_LINUX_DEFAULT="quiet splash" пример "пусто"
	пункты загрузки linux-ядер будут преобразованы в verbose mode, то есть режим загрузки без 
	графической заставки и с выводом на экран текстовой информации
	loading points of linux kernels will be converted to verbose mode, that is, the boot 
	mode without a graphic screen saver and with the display of text information
	GRUB_DISTRIBUTOR=`Gentoo`
	данная строка отвечает за названия дистрибутива, которое будет отображаться в меню GRUB2
	This line is responsible for the names of the distribution, which will be displayed in the menu GRUB2
	GRUB_GFXMODE=1024x768x32
	этот пункт отвечает за разрешение графического меню GRUB2 (640x480, 800x600, 1024x768, 1600×1200  для 
	соотношения сторон 4:3. И 640x400, 800x500, 1024x640, 1280x800, 1680x1050 для широкоформатных 
	мониторов с соотношением сторон 16:10)
	This item is responsible for resolving the GRUB2 graphic menu (for example: 640x480, 800x600, 1024x768, 1600x1200 for the 
	aspect ratio of 4: 3. And 640x400, 800x500, 1024x640, 1280x800, 1680x1050 for widescreen monitors with a 16:10 aspect ratio)
		
grub-mkconfig -o /boot/grub/grub.cfg

nano -w /etc/conf.d/hostname
	test
	
nano -w /etc/hosts
	127.0.0.1 test localhost
	::1       localhost

cd ..
rm stage3-*.tar.*
exit
cd

$PWD/*
umount -l /mnt/gentoo/dev{/shm,/pts,}  
umount -R /mnt/gentoo
reboot

=================================
Linux Bootlogo
логотип экран загрузки Linux
boot logo/screen of Linux
бешеные пингвины отображаются на экране
к примеру если у вас один процессор то один пингвин
rabid penguins are displayed on the screen
for example, if you have one processor, one penguin

Перекомпилировать и установить ядро
Драйверы устройств ---> 
    Поддержка графики ---> 
        [*] Логотип загрузки ---> 
            [*] 224-цветной логотип Armadeus Linux

Recompile & install kernel
Device Drivers  --->
    Graphics support  --->
        [*] Bootup logo  --->
            [*]   224-color Armadeus Linux logo
=================================

03/06 15:21 2018
